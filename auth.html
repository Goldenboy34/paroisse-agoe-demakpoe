<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Espace Fidèle | NDA Démakpoè</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body class="flex items-center justify-center min-h-screen reveal">
    
    <img src="gr.jpg" class="marie-bg" alt="Fond">

    <div class="w-full max-w-md p-6 relative z-10">
        <div class="glass-card p-10 border-t-8 border-slate-900 shadow-[0_20px_50px_rgba(0,0,0,0.1)]">
            
            <!-- Header -->
            <div class="text-center mb-10">
                <div class="relative inline-block">
                    <img src="logo-paroisse.jpeg.jpeg" class="h-20 w-20 mx-auto rounded-full mb-4 border-2 border-gold shadow-lg pulse-gold object-cover">
                    <div class="absolute -bottom-1 -right-1 bg-green-500 w-4 h-4 rounded-full border-2 border-white"></div>
                </div>
                <h2 id="authTitle" class="text-3xl font-serif italic text-slate-900 tracking-tight">Connexion</h2>
                <p class="text-[9px] uppercase font-black text-slate-400 tracking-[0.3em] mt-2">Paroisse NDA Démakpoè</p>
            </div>

            <form id="authForm" class="space-y-6">
                <div id="usernameField" class="hidden space-y-1">
                    <label class="text-[10px] font-black uppercase ml-4 text-slate-500 tracking-widest">Nom Complet</label>
                    <div class="relative">
                        <i class="fa-solid fa-user absolute left-5 top-1/2 -translate-y-1/2 text-slate-400 text-xs"></i>
                        <input type="text" id="username" placeholder="Prénom Nom" class="input-pro pl-12 mb-0">
                    </div>
                </div>

                <div class="space-y-1">
                    <label class="text-[10px] font-black uppercase ml-4 text-slate-500 tracking-widest">Identifiant</label>
                    <div class="relative">
                        <i class="fa-solid fa-id-card absolute left-5 top-1/2 -translate-y-1/2 text-slate-400 text-xs"></i>
                        <input type="text" id="identifier" placeholder="Email, N° ou Pseudo" class="input-pro pl-12 mb-0" required>
                    </div>
                </div>
                
                <div class="space-y-1">
                    <div class="flex justify-between items-center px-4">
                        <label class="text-[10px] font-black uppercase text-slate-500 tracking-widest">Mot de passe</label>
                        <a href="#" class="text-[9px] font-bold text-gold uppercase tracking-tighter hover:underline">Oublié ?</a>
                    </div>
                    <div class="relative">
                        <i class="fa-solid fa-lock absolute left-5 top-1/2 -translate-y-1/2 text-slate-400 text-xs"></i>
                        <input type="password" id="password" placeholder="••••••••" class="input-pro pl-12 mb-0" required>
                        <button type="button" id="togglePassword" class="absolute right-5 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-900 transition">
                            <i class="fa-solid fa-eye text-xs"></i>
                        </button>
                    </div>
                </div>

                <button type="submit" id="authBtn" class="btn-gold w-full py-5 text-[11px] shadow-xl mt-4 flex items-center justify-center gap-3">
                    <span>Se Connecter</span>
                    <i class="fa-solid fa-arrow-right-to-bracket"></i>
                </button>
            </form>

            <div class="text-center mt-10 pt-6 border-t border-slate-100">
                <p class="text-xs text-slate-500 font-medium">
                    <span id="toggleText">Nouveau fidèle ?</span>
                    <button id="toggleAuth" class="text-slate-900 font-black underline ml-1 hover:text-gold transition-colors">Créer un compte</button>
                </p>
                <a href="index.html" class="inline-flex items-center gap-2 mt-8 text-[9px] font-black uppercase text-slate-400 hover:text-slate-900 transition-all tracking-[0.2em]">
                    <i class="fa-solid fa-house"></i>
                    RETOUR À L'ACCUEIL
                </a>
            </div>
        </div>
    </div>

    <!-- MODAL MOT DE PASSE OUBLIÉ (CORRIGÉ) -->
    <div id="forgotModal" class="fixed inset-0 bg-slate-900/60 backdrop-blur-sm hidden flex items-center justify-center z-[200] p-4">
        <div class="glass-card p-8 w-full max-w-sm border-t-4 border-gold shadow-2xl">
            <h3 class="text-xl font-serif italic text-slate-900 mb-2">Récupération</h3>
            <p class="text-[10px] text-slate-500 uppercase font-black mb-6 tracking-widest">Saisissez votre Email ou N° de Téléphone</p>
            
            <!-- LA BALISE FORM ÉTAIT MANQUANTE ICI -->
            <form id="forgotForm" class="space-y-4">
                <input type="text" id="forgotEmail" placeholder="Email ou N° de Téléphone" class="input-pro mb-0" required>
                <div class="flex gap-2">
                    <button type="button" onclick="closeForgotModal()" class="flex-1 bg-slate-200 text-slate-600 py-3 rounded-full text-[10px] font-black uppercase">Annuler</button>
                    <button type="submit" id="forgotBtn" class="flex-2 btn-gold py-3 px-6">Envoyer le lien</button>
                </div>
            </form>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="script.js"></script>
</body>
</html>